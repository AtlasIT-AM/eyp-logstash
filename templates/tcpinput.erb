input {
 tcp {
<% if defined?(@type) -%>
   type => "<%= @type %>"
<% end -%>
   port => <%= @port %>
<% if defined?(@codec) -%>
<% if defined?(@charset) -%>
   codec => <%= @codec %> { charset => "<%= @charset %>" }
<% else -%>
   codec => <%= @codec %>
<% end -%>
<% end -%>
 }
}
